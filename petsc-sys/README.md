# `petsc-sys`: Unsafe raw PETSc rust bindings

Raw PETSc bindings generated by bindgen. Bindings are generated using both public and private headers (optional). You can use this crate by putting the following in your `Cargo.toml`. If you want to use it in conjunction with `petsc-rs`, read the `petsc-rs` docs on how to do that.

```toml
[dependencies]
petsc-sys = { git = "https://gitlab.com/petsc/petsc-rs/", branch = "main" }
```

# Features

PETSc has support for multiple different sizes of scalars and integers. To expose this to rust, we require you set different features. The following are all the features that can be set. Note, you are required to have exactly one scalar feature set and exactly one integer feature set. And it must match the PETSc install.

- **`petsc-real-f64`** *(enabled by default)* — Sets the real type, `PetscReal`, to be `f64`. Also sets the complex type, `PetscComplex`, to be `Complex<f64>`.
- **`petsc-real-f32`** — Sets the real type, `PetscReal` to be `f32`. Also sets the complex type, `PetscComplex`, to be `Complex<f32>`.
- **`petsc-use-complex-unsafe`** *(disabled by default)* *(unsafe)* - Sets the scalar type, `PetscScalar`, to be the complex type, `PetscComplex`. If disabled then the scalar type is the real type, `PetscReal`. This is unsafe because `petsc-rs` makes no guarantees about following the correct calling convention across the FFI boundary (read gitlab [issue #1](https://gitlab.com/petsc/petsc-rs/-/issues/1) for more information).
- **`petsc-int-i32`** *(enabled by default)* — Sets the integer type, `PetscInt`, to be `i32`.
- **`petsc-int-i64`** — Sets the integer type, `PetscInt`, to be `i64`.
- **`generate-enums`** — Tells `petsc-sys` to generate enums from `#define`s in the headers. This is done for the error enum, `PetscErrorCodeEnum`, and many type enums like `MatTypeEnum` and `DMTypeEnum`. This feature is used by `petsc-rs`, but if you are just using the `petsc-sys` raw bindings then this feature is most likely not needed as all the `#define`s are already ported as `pub const`s from bindgen.
- **`use-private-headers`** — Tells `petsc-sys` to generate bindings using the private headers. This feature is used by `petsc-rs`, but if you only want to use these bindings in the same way you would use the C API, then you don't need this feature. Note, not all private headers are necessarily used, just the ones needed by `petsc-rs`.

# MPI

This crate will not generate any MPI bindings. Instead, it uses the `mpi-sys` crate from [`rsmpi`](https://github.com/rsmpi/rsmpi).

# Documentation

To get documentation for each function, use the [C API function index](https://petsc.org/release/docs/manualpages/singleindex.html) ([this version](https://petsc.org/main/docs/manualpages/singleindex.html) if you are using the main branch). The functions/types all have the same names.
